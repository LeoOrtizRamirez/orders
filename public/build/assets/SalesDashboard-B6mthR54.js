import{d as S,r as u,o as V,c as b,k as l,l as o,m as t,x as p,A as h,a1 as D,t as n,f as w,u as C,F as g,D as f}from"./vendor-Bdl_vdY1.js";import{u as F,a as M,c as P}from"./main-D8Sf3LQA.js";import{m as T}from"./vue3-apexcharts-Dps2CmOh.js";import"./quill-De1S0mUZ.js";const A={class:"panel mb-6"},B={class:"panel-body flex items-center space-x-4"},N={key:0,class:"text-center"},U={key:1,class:"alert alert-danger"},I={key:2,class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},O={class:"panel lg:col-span-2"},K={class:"panel"},R={class:"table-responsive"},q={class:"table-hover"},z={class:"panel"},E={class:"table-responsive h-96"},L={class:"table-hover"},W=S({__name:"SalesDashboard",setup(j){F({title:"Reporte de Ventas"});const v=M(),c=u(!0),i=u(""),r=u(null),k=new Date().toISOString().split("T")[0],y=new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0],d=u({startDate:y,endDate:k}),m=async()=>{c.value=!0,i.value="";try{const a=await P.get("/api/reports/sales",{params:{start_date:d.value.startDate,end_date:d.value.endDate}});r.value=a.data}catch(a){i.value="No se pudieron cargar los datos del reporte.",console.error(a)}finally{c.value=!1}};V(m);const _=b(()=>{var e;const a=v.theme==="dark"||v.isDarkMode;return{chart:{type:"line",height:300,toolbar:{show:!1}},colors:["#194C8D"],stroke:{width:2,curve:"smooth"},xaxis:{categories:((e=r.value)==null?void 0:e.sales_over_time.map(s=>s.date))||[],axisBorder:{color:a?"#191e3a":"#e0e6ed"}},yaxis:{labels:{formatter:s=>s.toFixed(0)}},grid:{borderColor:a?"#191e3a":"#e0e6ed"},tooltip:{theme:a?"dark":"light"}}}),x=b(()=>{var a;return[{name:"Cantidad Vendida",data:((a=r.value)==null?void 0:a.sales_over_time.map(e=>e.total_quantity))||[]}]});return(a,e)=>(o(),l("div",null,[e[9]||(e[9]=t("div",{class:"mb-6"},[t("h1",{class:"text-3xl font-bold"},"Dashboard de Ventas y Stock"),t("p",{class:"text-gray-500"},"Visualización de productos vendidos y stock disponible.")],-1)),t("div",A,[t("div",B,[t("div",null,[e[2]||(e[2]=t("label",{for:"startDate"},"Fecha de Inicio:",-1)),h(t("input",{type:"date",id:"startDate",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=s=>d.value.startDate=s)},null,512),[[D,d.value.startDate]])]),t("div",null,[e[3]||(e[3]=t("label",{for:"endDate"},"Fecha de Fin:",-1)),h(t("input",{type:"date",id:"endDate",class:"form-input","onUpdate:modelValue":e[1]||(e[1]=s=>d.value.endDate=s)},null,512),[[D,d.value.endDate]])]),t("button",{class:"btn btn-primary",onClick:m},"Filtrar")])]),c.value?(o(),l("div",N,"Cargando datos...")):p("",!0),i.value?(o(),l("div",U,n(i.value),1)):p("",!0),r.value?(o(),l("div",I,[t("div",O,[e[4]||(e[4]=t("h2",{class:"text-xl font-bold mb-4"},"Cantidad de Productos Vendidos",-1)),w(C(T),{height:"300",options:_.value,series:x.value,class:"bg-white dark:bg-black rounded-lg overflow-hidden"},null,8,["options","series"])]),t("div",K,[e[6]||(e[6]=t("h2",{class:"text-xl font-bold mb-4"},"Top 10 Productos Más Vendidos",-1)),t("div",R,[t("table",q,[e[5]||(e[5]=t("thead",null,[t("tr",null,[t("th",null,"SKU"),t("th",null,"Producto"),t("th",null,"Total Vendido")])],-1)),t("tbody",null,[(o(!0),l(g,null,f(r.value.top_sold_products,s=>(o(),l("tr",{key:s.id},[t("td",null,n(s.sku),1),t("td",null,n(s.name),1),t("td",null,n(s.total_sold),1)]))),128))])])])]),t("div",z,[e[8]||(e[8]=t("h2",{class:"text-xl font-bold mb-4"},"Stock de Productos",-1)),t("div",E,[t("table",L,[e[7]||(e[7]=t("thead",null,[t("tr",null,[t("th",null,"SKU"),t("th",null,"Producto"),t("th",null,"Stock Actual")])],-1)),t("tbody",null,[(o(!0),l(g,null,f(r.value.product_stock,s=>(o(),l("tr",{key:s.id},[t("td",null,n(s.sku),1),t("td",null,n(s.name),1),t("td",null,n(s.stock),1)]))),128))])])])])])):p("",!0)]))}});export{W as default};
