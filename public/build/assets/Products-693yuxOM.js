import{d as at,c as B,b as X,_ as ot,u as it}from"./main-D69Cgyo9.js";import{S as tt}from"./sweetalert2.esm.all-5zhdP7Ax.js";import{r as y,c as F,d as L,w as lt,k as n,l,m as t,t as o,x as h,u as c,y as rt,n as M,C as Q,A as k,I as et,F as D,D as T,P as W,q as U,f as S,a3 as dt,a2 as C,H as nt,o as ct}from"./vendor-BuRU_kNN.js";import{_ as ut}from"./AlertMessages.vue_vue_type_script_setup_true_lang-Bx3XH_bc.js";import{Y as pt,h as st,_ as mt,G as gt,S as vt}from"./transition-DmF2Pzyd.js";import"./quill-De1S0mUZ.js";import"./hidden-CJVN9Aon.js";import"./keyboard-CA3kR_KZ.js";import"./open-closed-BTc9WkmO.js";function ht(){const{t:m}=at(),d=y([]),p=y([]),_=y(!1),a=y(!1),e=y(""),s=y(""),i=y({}),u=y(""),g=y({category:"",stock_status:""}),V={id:null,name:"",sku:"",description:"",price:0,cost:0,stock:0,min_stock:10,reorder_point:5,unit:"kg",category:"",brand:"",supplier:"",is_active:!0,order:0},$=y({...V}),O=F(()=>{let r=d.value;if(u.value){const v=u.value.toLowerCase();r=r.filter(f=>f.name.toLowerCase().includes(v)||f.sku.toLowerCase().includes(v)||f.description.toLowerCase().includes(v))}return r}),z=F(()=>d.value.length),G=F(()=>d.value.filter(r=>r.is_active).length),H=F(()=>d.value.filter(r=>r.stock<=r.reorder_point&&r.stock>0).length),Z=F(()=>d.value.filter(r=>r.stock===0).length),E=async()=>{_.value=!0,e.value="";try{const r=new URLSearchParams;g.value.category&&r.append("category",g.value.category),g.value.stock_status&&r.append("stock_status",g.value.stock_status);const v=await B.get(`/api/products?${r}`);d.value=v.data.data}catch(r){console.error("Error fetching products:",r),e.value=m("products_page.alerts.loading_error"),b(m("products_page.alerts.loading_error"),"error")}finally{_.value=!1}},I=async()=>{try{const r=await B.get("/api/products/categories");p.value=r.data.data}catch(r){console.error("Error fetching categories:",r)}},q=async()=>{a.value=!0,i.value={},e.value="",s.value="";try{if($.value.id){const{data:r}=await B.put(`/api/products/${$.value.id}`,$.value),v=d.value.findIndex(f=>f.id===$.value.id);v!==-1&&d.value.splice(v,1,r),b(m("products_page.alerts.update_success"))}else{const{data:r}=await B.post("/api/products",$.value);d.value.unshift(r),b(m("products_page.alerts.save_success"))}return await I(),!0}catch(r){return r.response&&r.response.status===422?(i.value=r.response.data.errors,e.value=m("products_page.alerts.validation_errors")):(console.error("Error al guardar producto:",r),e.value=m("products_page.alerts.save_error"),b(m("products_page.alerts.save_error"),"error")),!1}finally{a.value=!1}},A=async r=>{var f;if(r.purchase_order_items_count>0)return b(m("products_page.alerts.cannot_delete"),"error"),!1;if((await tt.fire({title:m("products_page.delete_confirm.title"),text:m("products_page.delete_confirm.text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:m("products_page.delete_confirm.confirm"),cancelButtonText:m("products_page.delete_confirm.cancel")})).isConfirmed)try{return await B.delete(`/api/products/${r.id}`),d.value=d.value.filter(P=>P.id!==r.id),b(m("products_page.alerts.delete_success")),!0}catch(P){return console.error("Error eliminando producto:",P),((f=P.response)==null?void 0:f.status)===400?b(P.response.data.message,"error"):b(m("products_page.alerts.delete_error"),"error"),!1}return!1},Y=async r=>{try{const{data:v}=await B.put(`/api/products/${r.id}/toggle-status`),f=d.value.findIndex(w=>w.id===r.id);f!==-1&&(d.value[f].is_active=v.is_active);const P=v.is_active?"activado":"desactivado";return b(m("products_page.alerts.status_toggle_success",{status:P})),!0}catch(v){return console.error("Error cambiando estado del producto:",v),b(m("products_page.alerts.status_error"),"error"),!1}},N=(r=null)=>{i.value={},r?$.value={id:r.id,name:r.name,sku:r.sku,description:r.description||"",price:parseFloat(r.price.toString()),cost:parseFloat((r.cost||0).toString()),stock:r.stock,min_stock:r.min_stock,reorder_point:r.reorder_point,unit:r.unit||"unidad",category:r.category||"",brand:r.brand||"",supplier:r.supplier||"",is_active:r.is_active,order:r.order||0}:$.value={...V}},R=()=>{$.value={...V},i.value={}},J=r=>r.stock===0?"text-danger":r.stock<=r.reorder_point?"text-warning":"text-success",b=(r="",v="success")=>{v==="success"?s.value=r:e.value=r,tt.mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,customClass:{container:"toast"}}).fire({icon:v,title:r,padding:"10px 20px"})};return{productsList:d,categories:p,loading:_,saving:a,errorMessage:e,successMessage:s,errors:i,searchProduct:u,filters:g,params:$,filteredProductsList:O,totalProducts:z,activeProducts:G,lowStockProducts:H,outOfStockProducts:Z,fetchProducts:E,fetchCategories:I,saveProduct:q,deleteProduct:A,toggleProductStatus:Y,editProduct:N,resetParams:R,getStockClass:J,showMessage:b,moneyFormat:(r=0)=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}}const _t={class:"flex items-center justify-between flex-wrap gap-4"},ft={class:"text-xl"},bt={class:"flex sm:flex-row flex-col sm:items-center sm:gap-3 gap-4 w-full sm:w-auto"},kt={class:"flex gap-3"},yt={class:"flex gap-2"},$t={value:""},wt=["value"],Ct={value:""},Pt={value:"low"},xt={value:"out"},St={class:"relative"},Mt=["placeholder","value"],Vt=L({__name:"ProductsHeader",props:{displayType:{},filters:{},categories:{},searchProduct:{}},emits:["update:display-type","update:filters","update:search-product","add-product"],setup(m,{emit:d}){const p=m,_=d,a=X(),e=y({...p.filters}),s=()=>{_("update:filters",{...e.value})};return lt(()=>p.filters,i=>{e.value={...i}},{deep:!0}),(i,u)=>(l(),n("div",_t,[t("h2",ft,o(i.$t("products_page.title")),1),t("div",bt,[t("div",kt,[t("div",null,[c(a).can("create products")?(l(),n("button",{key:0,type:"button",class:"btn btn-primary",onClick:u[0]||(u[0]=g=>i.$emit("add-product"))},[u[6]||(u[6]=t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5 ltr:mr-2 rtl:ml-2"},[t("path",{d:"M12 22C17.5 22 22 17.5 22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22Z",stroke:"currentColor","stroke-width":"1.5"}),t("path",{opacity:"0.5",d:"M8 12H16",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"}),t("path",{opacity:"0.5",d:"M12 16V8",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})],-1)),rt(" "+o(i.$t("products_page.add_product_btn")),1)])):h("",!0)]),t("div",null,[t("button",{type:"button",class:M(["btn btn-outline-primary p-2",{"bg-primary text-white":i.displayType==="list"}]),onClick:u[1]||(u[1]=g=>i.$emit("update:display-type","list"))},[...u[7]||(u[7]=[Q('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"><path d="M2 5.5L3.21429 7L7.5 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path opacity="0.5" d="M2 12.5L3.21429 14L7.5 10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M2 19.5L3.21429 21L7.5 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M22 19L12 19" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path opacity="0.5" d="M22 12L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path><path d="M22 5L12 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',1)])],2)]),t("div",null,[t("button",{type:"button",class:M(["btn btn-outline-primary p-2",{"bg-primary text-white":i.displayType==="grid"}]),onClick:u[2]||(u[2]=g=>i.$emit("update:display-type","grid"))},[...u[8]||(u[8]=[Q('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-5 h-5"><path opacity="0.5" d="M2.5 6.5C2.5 4.61438 2.5 3.67157 3.08579 3.08579C3.67157 2.5 4.61438 2.5 6.5 2.5C8.38562 2.5 9.32843 2.5 9.91421 3.08579C10.5 3.67157 10.5 4.61438 10.5 6.5C10.5 8.38562 10.5 9.32843 9.91421 9.91421C9.32843 10.5 8.38562 10.5 6.5 10.5C4.61438 10.5 3.67157 10.5 3.08579 9.91421C2.5 9.32843 2.5 8.38562 2.5 6.5Z" stroke="currentColor" stroke-width="1.5"></path><path opacity="0.5" d="M13.5 17.5C13.5 15.6144 13.5 14.6716 14.0858 14.0858C14.6716 13.5 15.6144 13.5 17.5 13.5C19.3856 13.5 20.3284 13.5 20.9142 14.0858C21.5 14.6716 21.5 15.6144 21.5 17.5C21.5 19.3856 21.5 20.3284 20.9142 20.9142C20.3284 21.5 19.3856 21.5 17.5 21.5C15.6144 21.5 14.6716 21.5 14.0858 20.9142C13.5 20.3284 13.5 19.3856 13.5 17.5Z" stroke="currentColor" stroke-width="1.5"></path><path d="M2.5 17.5C2.5 15.6144 2.5 14.6716 3.08579 14.0858C3.67157 13.5 4.61438 13.5 6.5 13.5C8.38562 13.5 9.32843 13.5 9.91421 14.0858C10.5 14.6716 10.5 15.6144 10.5 17.5C10.5 19.3856 10.5 20.3284 9.91421 20.9142C9.32843 21.5 8.38562 21.5 6.5 21.5C4.61438 21.5 3.67157 21.5 3.08579 20.9142C2.5 20.3284 2.5 19.3856 2.5 17.5Z" stroke="currentColor" stroke-width="1.5"></path><path d="M13.5 6.5C13.5 4.61438 13.5 3.67157 14.0858 3.08579C14.6716 2.5 15.6144 2.5 17.5 2.5C19.3856 2.5 20.3284 2.5 20.9142 3.08579C21.5 3.67157 21.5 4.61438 21.5 6.5C21.5 8.38562 21.5 9.32843 20.9142 9.91421C20.3284 10.5 19.3856 10.5 17.5 10.5C15.6144 10.5 14.6716 10.5 14.0858 9.91421C13.5 9.32843 13.5 8.38562 13.5 6.5Z" stroke="currentColor" stroke-width="1.5"></path></svg>',1)])],2)])]),t("div",yt,[k(t("select",{"onUpdate:modelValue":u[3]||(u[3]=g=>e.value.category=g),class:"form-select py-2",onChange:s},[t("option",$t,o(i.$t("products_page.filters.all_categories")),1),(l(!0),n(D,null,T(i.categories,g=>(l(),n("option",{key:g,value:g},o(g),9,wt))),128))],544),[[et,e.value.category]]),k(t("select",{"onUpdate:modelValue":u[4]||(u[4]=g=>e.value.stock_status=g),class:"form-select py-2",onChange:s},[t("option",Ct,o(i.$t("products_page.filters.all_stock")),1),t("option",Pt,o(i.$t("products_page.filters.low_stock")),1),t("option",xt,o(i.$t("products_page.filters.out_of_stock")),1)],544),[[et,e.value.stock_status]])]),t("div",St,[t("input",{type:"text",placeholder:i.$t("products_page.search_placeholder"),class:"form-input py-2 ltr:pr-11 rtl:pl-11 peer",value:i.searchProduct,onInput:u[5]||(u[5]=g=>i.$emit("update:search-product",g.target.value))},null,40,Mt),u[9]||(u[9]=t("div",{class:"absolute ltr:right-[11px] rtl:left-[11px] top-1/2 -translate-y-1/2 peer-focus:text-primary"},[t("svg",{class:"mx-auto",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"11.5",cy:"11.5",r:"9.5",stroke:"currentColor","stroke-width":"1.5",opacity:"0.5"}),t("path",{d:"M18.5 18.5L22 22",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round"})])],-1))])])]))}}),Bt={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mt-6"},Lt={class:"bg-white dark:bg-[#1c232f] rounded-md border border-[#e0e6ed] dark:border-[#1b2e4b] p-6"},jt={class:"flex items-center justify-between"},Ft={class:"text-lg font-semibold"},Ut={class:"text-gray-500 dark:text-gray-400"},Dt={class:"bg-white dark:bg-[#1c232f] rounded-md border border-[#e0e6ed] dark:border-[#1b2e4b] p-6"},Tt={class:"flex items-center justify-between"},Ot={class:"text-lg font-semibold"},Et={class:"text-gray-500 dark:text-gray-400"},It={class:"bg-white dark:bg-[#1c232f] rounded-md border border-[#e0e6ed] dark:border-[#1b2e4b] p-6"},Nt={class:"flex items-center justify-between"},zt={class:"text-lg font-semibold"},Gt={class:"text-gray-500 dark:text-gray-400"},Ht={class:"bg-white dark:bg-[#1c232f] rounded-md border border-[#e0e6ed] dark:border-[#1b2e4b] p-6"},Zt={class:"flex items-center justify-between"},qt={class:"text-lg font-semibold"},At={class:"text-gray-500 dark:text-gray-400"},Yt=L({__name:"ProductStats",props:{totalProducts:{},activeProducts:{},lowStockProducts:{},outOfStockProducts:{}},setup(m){return(d,p)=>(l(),n("div",Bt,[t("div",Lt,[t("div",jt,[t("div",null,[t("div",Ft,o(d.totalProducts),1),t("div",Ut,o(d.$t("products_page.stats.total_products")),1)]),p[0]||(p[0]=t("div",{class:"p-3 rounded-full bg-primary/10 text-primary"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m8-8V4a1 1 0 00-1-1h-2a1 1 0 00-1 1v1M9 7h6"})])],-1))])]),t("div",Dt,[t("div",Tt,[t("div",null,[t("div",Ot,o(d.activeProducts),1),t("div",Et,o(d.$t("products_page.stats.active_products")),1)]),p[1]||(p[1]=t("div",{class:"p-3 rounded-full bg-success/10 text-success"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])]),t("div",It,[t("div",Nt,[t("div",null,[t("div",zt,o(d.lowStockProducts),1),t("div",Gt,o(d.$t("products_page.stats.low_stock")),1)]),p[2]||(p[2]=t("div",{class:"p-3 rounded-full bg-warning/10 text-warning"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))])]),t("div",Ht,[t("div",Zt,[t("div",null,[t("div",qt,o(d.outOfStockProducts),1),t("div",At,o(d.$t("products_page.stats.out_of_stock")),1)]),p[3]||(p[3]=t("div",{class:"p-3 rounded-full bg-danger/10 text-danger"},[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))])])]))}}),Rt={class:"panel p-0 border-0 overflow-hidden"},Jt={class:"table-responsive"},Kt={class:"table-striped table-hover"},Qt={class:"!text-center"},Wt={key:0},Xt={key:1},te={colspan:"9",class:"text-center py-8 text-gray-500"},ee={class:"font-mono text-sm"},se={class:"flex items-center w-max"},oe={class:"font-semibold"},re={class:"text-xs text-gray-500 mt-1 line-clamp-2"},ae={key:0,class:"badge bg-primary/10 text-primary"},ie={key:1,class:"text-gray-400"},le={class:"font-semibold text-success"},de={class:"text-gray-600"},ne={class:"flex items-center"},ce={class:"text-gray-500 text-sm ml-1"},ue={class:"text-gray-600"},pe={class:"flex gap-2 items-center justify-center"},me=["onClick"],ge=["onClick","disabled","title"],ve=["onClick"],he=L({__name:"ProductsListView",props:{products:{},loading:{type:Boolean}},emits:["edit-product","delete-product","toggle-status"],setup(m){const d=X(),p=a=>a.stock===0?"text-danger":a.stock<=a.reorder_point?"text-warning":"text-success",_=(a=0)=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);return(a,e)=>(l(),n("div",Rt,[t("div",Jt,[t("table",Kt,[t("thead",null,[t("tr",null,[t("th",null,o(a.$t("products_page.table.sku")),1),t("th",null,o(a.$t("products_page.table.product")),1),t("th",null,o(a.$t("products_page.table.category")),1),t("th",null,o(a.$t("products_page.table.price")),1),t("th",null,o(a.$t("products_page.table.cost")),1),t("th",null,o(a.$t("products_page.table.stock")),1),t("th",null,o(a.$t("products_page.table.min_stock")),1),t("th",null,o(a.$t("products_page.table.status")),1),t("th",Qt,o(a.$t("products_page.table.actions")),1)])]),t("tbody",null,[a.loading?(l(),n("tr",Wt,[...e[0]||(e[0]=[t("td",{colspan:"9",class:"text-center py-4"},[t("div",{class:"animate-spin border-2 border-primary border-t-transparent rounded-full w-6 h-6 mx-auto"})],-1)])])):a.products.length===0?(l(),n("tr",Xt,[t("td",te,o(a.$t("products_page.alerts.no_products")),1)])):(l(!0),n(D,{key:2},T(a.products,s=>(l(),n("tr",{key:s.id},[t("td",null,[t("div",ee,o(s.sku),1)]),t("td",null,[t("div",se,[t("div",oe,o(s.name),1)]),t("div",re,o(s.description),1)]),t("td",null,[s.category?(l(),n("span",ae,o(s.category),1)):(l(),n("span",ie,"-"))]),t("td",null,[t("div",le,o(_(s.price)),1)]),t("td",null,[t("div",de,o(_(s.cost)),1)]),t("td",null,[t("div",ne,[t("span",{class:M(["font-semibold",p(s)])},o(s.stock),3),t("span",ce,o(s.unit||a.$t("products_page.unit_default")),1)])]),t("td",null,[t("div",ue,o(s.min_stock),1)]),t("td",null,[t("span",{class:M(["badge",s.is_active?"bg-success/10 text-success":"bg-danger/10 text-danger"])},o(s.is_active?a.$t("products_page.status.active"):a.$t("products_page.status.inactive")),3)]),t("td",null,[t("div",pe,[c(d).can("edit products")?(l(),n("button",{key:0,type:"button",class:"btn btn-sm btn-outline-primary",onClick:i=>a.$emit("edit-product",s)},o(a.$t("products_page.actions.edit")),9,me)):h("",!0),c(d).can("delete products")?(l(),n("button",{key:1,type:"button",class:"btn btn-sm btn-outline-danger",onClick:i=>a.$emit("delete-product",s),disabled:s.purchase_order_items_count>0,title:s.purchase_order_items_count>0?a.$t("products_page.alerts.cannot_delete"):""},o(a.$t("products_page.actions.delete")),9,ge)):h("",!0),c(d).can("edit products")?(l(),n("button",{key:2,type:"button",class:M(["btn btn-sm",s.is_active?"btn-outline-warning":"btn-outline-success"]),onClick:i=>a.$emit("toggle-status",s)},o(s.is_active?a.$t("products_page.actions.deactivate"):a.$t("products_page.actions.activate")),11,ve)):h("",!0)])])]))),128))])])])]))}}),_e=ot(he,[["__scopeId","data-v-66d2ade3"]]),fe={class:"grid 2xl:grid-cols-4 xl:grid-cols-3 sm:grid-cols-2 grid-cols-1 gap-6 w-full"},be={key:1,class:"col-span-full text-center py-12"},ke={class:"text-gray-500 text-lg"},ye={class:"px-6 pb-20 -mt-8 relative"},$e={class:"shadow-md bg-white dark:bg-gray-900 rounded-md px-4 py-6"},we={class:"text-lg font-semibold mb-2"},Ce={class:"text-white-dark text-sm min-h-[40px] line-clamp-2"},Pe={class:"mt-4 space-y-2"},xe={class:"flex justify-between items-center"},Se={class:"text-gray-600"},Me={class:"font-mono text-sm"},Ve={class:"flex justify-between items-center"},Be={class:"text-gray-600"},Le={class:"font-semibold text-success"},je={class:"flex justify-between items-center"},Fe={class:"text-gray-600"},Ue={class:"mt-4 flex justify-between items-center"},De={key:0,class:"badge bg-primary/10 text-primary text-xs"},Te={class:"absolute bottom-0 left-0 right-0 p-4 flex gap-2"},Oe=["onClick"],Ee=["onClick","title"],Ie=L({__name:"ProductsGridView",props:{products:{},loading:{type:Boolean}},emits:["edit-product","delete-product","toggle-status"],setup(m){const d=X(),p=a=>a.stock===0?"text-danger":a.stock<=a.reorder_point?"text-warning":"text-success",_=(a=0)=>new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(a);return(a,e)=>(l(),n("div",fe,[a.loading?(l(),n(D,{key:0},T(8,s=>t("div",{key:"skeleton-"+s,class:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative h-80"},[...e[0]||(e[0]=[Q('<div class="animate-pulse h-full flex flex-col" data-v-f30385c0><div class="bg-gray-300 h-32 rounded-t-md" data-v-f30385c0></div><div class="p-4 flex-1 flex flex-col justify-between" data-v-f30385c0><div class="space-y-2" data-v-f30385c0><div class="h-4 bg-gray-300 rounded" data-v-f30385c0></div><div class="h-3 bg-gray-300 rounded" data-v-f30385c0></div><div class="h-3 bg-gray-300 rounded w-3/4 mx-auto" data-v-f30385c0></div></div><div class="flex gap-2 mt-4" data-v-f30385c0><div class="h-8 bg-gray-300 rounded flex-1" data-v-f30385c0></div><div class="h-8 bg-gray-300 rounded flex-1" data-v-f30385c0></div></div></div></div>',1)])])),64)):a.products.length===0?(l(),n("div",be,[t("div",ke,o(a.$t("products_page.alerts.no_products")),1)])):(l(!0),n(D,{key:2},T(a.products,s=>(l(),n("div",{key:s.id,class:"bg-white dark:bg-[#1c232f] rounded-md overflow-hidden text-center shadow relative border border-[#e0e6ed] dark:border-[#1b2e4b]"},[e[1]||(e[1]=t("div",{class:"rounded-t-md p-6 pb-0 relative h-32 bg-gradient-to-r from-primary/10 to-secondary/10"},[t("div",{class:"grid place-content-center h-16 w-16 mx-auto rounded-full text-3xl mb-4 bg-white dark:bg-gray-800 shadow"}," ðŸ“¦ ")],-1)),t("div",ye,[t("div",$e,[t("div",we,o(s.name),1),t("div",Ce,o(s.description||a.$t("products_page.no_description")),1),t("div",Pe,[t("div",xe,[t("span",Se,o(a.$t("products_page.table.sku"))+":",1),t("span",Me,o(s.sku),1)]),t("div",Ve,[t("span",Be,o(a.$t("products_page.table.price"))+":",1),t("span",Le,o(_(s.price)),1)]),t("div",je,[t("span",Fe,o(a.$t("products_page.table.stock"))+":",1),t("span",{class:M(["font-semibold",p(s)])},o(s.stock)+" "+o(s.unit||a.$t("products_page.unit_default")),3)])]),t("div",Ue,[s.category?(l(),n("span",De,o(s.category),1)):h("",!0),t("span",{class:M(["badge",s.is_active?"bg-success/10 text-success":"bg-danger/10 text-danger"])},o(s.is_active?a.$t("products_page.status.active"):a.$t("products_page.status.inactive")),3)])])]),t("div",Te,[c(d).can("edit products")?(l(),n("button",{key:0,type:"button",class:"btn btn-outline-primary flex-1 btn-sm",onClick:i=>a.$emit("edit-product",s)},o(a.$t("products_page.actions.edit")),9,Oe)):h("",!0),c(d).can("edit products")?(l(),n("button",{key:1,type:"button",class:M(["btn btn-sm",s.is_active?"btn-outline-warning":"btn-outline-success"]),onClick:i=>a.$emit("toggle-status",s),title:s.is_active?a.$t("products_page.actions.deactivate"):a.$t("products_page.actions.activate")},o(s.is_active?"ðŸ”´":"ðŸŸ¢"),11,Ee)):h("",!0)])]))),128))]))}}),Ne=ot(Ie,[["__scopeId","data-v-f30385c0"]]),ze={class:"fixed inset-0 overflow-y-auto"},Ge={class:"flex min-h-full items-center justify-center px-4 py-8"},He={class:"text-lg font-medium bg-[#fbfbfb] dark:bg-[#121c2c] ltr:pl-5 rtl:pr-5 py-3 ltr:pr-[50px] rtl:pl-[50px]"},Ze={class:"p-5"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ae={class:"mb-5"},Ye={for:"name"},Re=["placeholder"],Je={key:0,class:"text-danger mt-1"},Ke={class:"mb-5"},Qe={for:"sku"},We=["placeholder"],Xe={key:0,class:"text-danger mt-1"},ts={class:"mb-5"},es={for:"description"},ss=["placeholder"],os={key:0,class:"text-danger mt-1"},rs={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},as={class:"mb-5"},is={for:"price"},ls=["placeholder"],ds={key:0,class:"text-danger mt-1"},ns={class:"mb-5"},cs={for:"cost"},us=["placeholder"],ps={key:0,class:"text-danger mt-1"},ms={class:"mb-5"},gs={for:"stock"},vs=["placeholder"],hs={key:0,class:"text-danger mt-1"},_s={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fs={class:"mb-5"},bs={for:"min_stock"},ks=["placeholder"],ys={key:0,class:"text-danger mt-1"},$s={class:"mb-5"},ws={for:"reorder_point"},Cs=["placeholder"],Ps={key:0,class:"text-danger mt-1"},xs={class:"mb-5"},Ss={for:"unit"},Ms=["placeholder"],Vs={key:0,class:"text-danger mt-1"},Bs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ls={class:"mb-5"},js={for:"category"},Fs=["placeholder"],Us={id:"categories"},Ds=["value"],Ts={key:0,class:"text-danger mt-1"},Os={class:"mb-5"},Es={for:"order"},Is=["placeholder"],Ns={key:0,class:"text-danger mt-1"},zs={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Gs={class:"mb-5"},Hs={class:"flex items-center cursor-pointer"},Zs={class:"text-white-dark ltr:ml-3 rtl:mr-3"},qs={class:"flex justify-end items-center mt-8"},As=["disabled"],Ys=["disabled"],Rs={key:0,class:"animate-spin border-2 border-white border-t-transparent rounded-full w-4 h-4 ltr:mr-2 rtl:ml-2 inline-block"},Js=L({__name:"ProductModal",props:{show:{type:Boolean},params:{},errors:{},saving:{type:Boolean},categories:{}},emits:["close","save"],setup(m,{emit:d}){const p=m,_=d,a=async()=>{_("save",p.params)};return(e,s)=>(l(),W(c(vt),{appear:"",show:e.show,as:"template"},{default:U(()=>[S(c(pt),{as:"div",onClose:s[14]||(s[14]=i=>e.$emit("close")),class:"relative z-[51]"},{default:U(()=>[S(c(st),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:U(()=>[S(c(mt),{class:"fixed inset-0 bg-[black]/60"})]),_:1}),t("div",ze,[t("div",Ge,[S(c(st),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:U(()=>[S(c(gt),{class:"panel border-0 p-0 rounded-lg overflow-hidden w-full max-w-2xl text-black dark:text-white-dark"},{default:U(()=>[t("button",{type:"button",class:"absolute top-4 ltr:right-4 rtl:left-4 text-gray-400 hover:text-gray-800 dark:hover:text-gray-600 outline-none",onClick:s[0]||(s[0]=i=>e.$emit("close"))},[...s[15]||(s[15]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round",class:"w-6 h-6"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])]),t("div",He,o(e.$t(e.params.id?"products_page.modal.edit_title":"products_page.modal.add_title")),1),t("div",Ze,[t("form",{onSubmit:dt(a,["prevent"])},[t("div",qe,[t("div",Ae,[t("label",Ye,o(e.$t("products_page.modal.fields.name"))+" *",1),k(t("input",{id:"name",type:"text",placeholder:e.$t("products_page.modal.placeholders.name"),class:"form-input","onUpdate:modelValue":s[1]||(s[1]=i=>e.params.name=i),required:""},null,8,Re),[[C,e.params.name]]),e.errors.name?(l(),n("div",Je,o(e.errors.name[0]),1)):h("",!0)]),t("div",Ke,[t("label",Qe,o(e.$t("products_page.modal.fields.sku")),1),k(t("input",{id:"sku",type:"text",placeholder:e.$t("products_page.modal.placeholders.sku"),class:"form-input","onUpdate:modelValue":s[2]||(s[2]=i=>e.params.sku=i)},null,8,We),[[C,e.params.sku]]),e.errors.sku?(l(),n("div",Xe,o(e.errors.sku[0]),1)):h("",!0)])]),t("div",ts,[t("label",es,o(e.$t("products_page.modal.fields.description")),1),k(t("textarea",{id:"description",placeholder:e.$t("products_page.modal.placeholders.description"),class:"form-textarea min-h-[80px]","onUpdate:modelValue":s[3]||(s[3]=i=>e.params.description=i)},null,8,ss),[[C,e.params.description]]),e.errors.description?(l(),n("div",os,o(e.errors.description[0]),1)):h("",!0)]),t("div",rs,[t("div",as,[t("label",is,o(e.$t("products_page.modal.fields.price"))+" *",1),k(t("input",{id:"price",type:"number",step:"0.01",min:"0",placeholder:e.$t("products_page.modal.placeholders.price"),class:"form-input","onUpdate:modelValue":s[4]||(s[4]=i=>e.params.price=i),required:""},null,8,ls),[[C,e.params.price]]),e.errors.price?(l(),n("div",ds,o(e.errors.price[0]),1)):h("",!0)]),t("div",ns,[t("label",cs,o(e.$t("products_page.modal.fields.cost")),1),k(t("input",{id:"cost",type:"number",step:"0.01",min:"0",placeholder:e.$t("products_page.modal.placeholders.cost"),class:"form-input","onUpdate:modelValue":s[5]||(s[5]=i=>e.params.cost=i)},null,8,us),[[C,e.params.cost]]),e.errors.cost?(l(),n("div",ps,o(e.errors.cost[0]),1)):h("",!0)]),t("div",ms,[t("label",gs,o(e.$t("products_page.modal.fields.stock")),1),k(t("input",{id:"stock",type:"number",min:"0",placeholder:e.$t("products_page.modal.placeholders.stock"),class:"form-input","onUpdate:modelValue":s[6]||(s[6]=i=>e.params.stock=i)},null,8,vs),[[C,e.params.stock]]),e.errors.stock?(l(),n("div",hs,o(e.errors.stock[0]),1)):h("",!0)])]),t("div",_s,[t("div",fs,[t("label",bs,o(e.$t("products_page.modal.fields.min_stock")),1),k(t("input",{id:"min_stock",type:"number",min:"0",placeholder:e.$t("products_page.modal.placeholders.min_stock"),class:"form-input","onUpdate:modelValue":s[7]||(s[7]=i=>e.params.min_stock=i)},null,8,ks),[[C,e.params.min_stock]]),e.errors.min_stock?(l(),n("div",ys,o(e.errors.min_stock[0]),1)):h("",!0)]),t("div",$s,[t("label",ws,o(e.$t("products_page.modal.fields.reorder_point")),1),k(t("input",{id:"reorder_point",type:"number",min:"0",placeholder:e.$t("products_page.modal.placeholders.reorder_point"),class:"form-input","onUpdate:modelValue":s[8]||(s[8]=i=>e.params.reorder_point=i)},null,8,Cs),[[C,e.params.reorder_point]]),e.errors.reorder_point?(l(),n("div",Ps,o(e.errors.reorder_point[0]),1)):h("",!0)]),t("div",xs,[t("label",Ss,o(e.$t("products_page.modal.fields.unit")),1),k(t("input",{id:"unit",type:"text",placeholder:e.$t("products_page.modal.placeholders.unit"),class:"form-input","onUpdate:modelValue":s[9]||(s[9]=i=>e.params.unit=i)},null,8,Ms),[[C,e.params.unit]]),e.errors.unit?(l(),n("div",Vs,o(e.errors.unit[0]),1)):h("",!0)])]),t("div",Bs,[t("div",Ls,[t("label",js,o(e.$t("products_page.modal.fields.category")),1),k(t("input",{id:"category",type:"text",placeholder:e.$t("products_page.modal.placeholders.category"),class:"form-input","onUpdate:modelValue":s[10]||(s[10]=i=>e.params.category=i),list:"categories"},null,8,Fs),[[C,e.params.category]]),t("datalist",Us,[(l(!0),n(D,null,T(e.categories,i=>(l(),n("option",{key:i,value:i},null,8,Ds))),128))]),e.errors.category?(l(),n("div",Ts,o(e.errors.category[0]),1)):h("",!0)]),t("div",Os,[t("label",Es,o(e.$t("products_page.modal.fields.order")),1),k(t("input",{id:"order",type:"number",min:"0",placeholder:e.$t("products_page.modal.placeholders.order"),class:"form-input","onUpdate:modelValue":s[11]||(s[11]=i=>e.params.order=i)},null,8,Is),[[C,e.params.order]]),e.errors.order?(l(),n("div",Ns,o(e.errors.order[0]),1)):h("",!0)])]),t("div",zs,[t("div",Gs,[t("label",Hs,[k(t("input",{type:"checkbox",class:"form-checkbox","onUpdate:modelValue":s[12]||(s[12]=i=>e.params.is_active=i)},null,512),[[nt,e.params.is_active]]),t("span",Zs,o(e.$t("products_page.modal.fields.active")),1)])])]),t("div",qs,[t("button",{type:"button",class:"btn btn-outline-danger",onClick:s[13]||(s[13]=i=>e.$emit("close")),disabled:e.saving},o(e.$t("products_page.modal.buttons.cancel")),9,As),t("button",{type:"submit",class:"btn btn-primary ltr:ml-4 rtl:mr-4",disabled:e.saving},[e.saving?(l(),n("span",Rs)):h("",!0),rt(" "+o(e.params.id?e.$t("products_page.modal.buttons.update"):e.$t("products_page.modal.buttons.add")),1)],8,Ys)])],32)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}}),Ks={class:"mt-5"},io=L({__name:"Products",setup(m){it({title:"GestiÃ³n de Productos"});const d=y("list"),p=y(!1),{categories:_,loading:a,saving:e,errorMessage:s,successMessage:i,errors:u,searchProduct:g,filters:V,params:$,filteredProductsList:O,totalProducts:z,activeProducts:G,lowStockProducts:H,outOfStockProducts:Z,fetchProducts:E,fetchCategories:I,saveProduct:q,deleteProduct:A,toggleProductStatus:Y,editProduct:N,resetParams:R}=ht();ct(()=>{E(),I()});const J=()=>{N(null),p.value=!0},b=w=>{N(w),p.value=!0},K=()=>{p.value=!1,R()},r=async w=>{await q()&&K()},v=async w=>{await A(w)},f=async w=>{await Y(w)},P=w=>{Object.assign(V,w),E()};return(w,x)=>(l(),n("div",null,[S(Vt,{"display-type":d.value,filters:c(V),categories:c(_),"search-product":c(g),"onUpdate:displayType":x[0]||(x[0]=j=>d.value=j),"onUpdate:filters":P,"onUpdate:searchProduct":x[1]||(x[1]=j=>g.value=j),onAddProduct:J},null,8,["display-type","filters","categories","search-product"]),S(ut,{"error-message":c(s),"success-message":c(i),onClearError:x[2]||(x[2]=j=>s.value=""),onClearSuccess:x[3]||(x[3]=j=>i.value="")},null,8,["error-message","success-message"]),S(Yt,{"total-products":c(z),"active-products":c(G),"low-stock-products":c(H),"out-of-stock-products":c(Z)},null,8,["total-products","active-products","low-stock-products","out-of-stock-products"]),t("div",Ks,[d.value==="list"?(l(),W(_e,{key:0,products:c(O),loading:c(a),onEditProduct:b,onDeleteProduct:v,onToggleStatus:f},null,8,["products","loading"])):(l(),W(Ne,{key:1,products:c(O),loading:c(a),onEditProduct:b,onDeleteProduct:v,onToggleStatus:f},null,8,["products","loading"]))]),S(Js,{show:p.value,params:c($),errors:c(u),saving:c(e),categories:c(_),onClose:K,onSave:r},null,8,["show","params","errors","saving","categories"])]))}});export{io as default};
